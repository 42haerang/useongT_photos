<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>느좋 송우성T 화보집</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{
      background:#0f0f10;color:#e9ecef;
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Arial,sans-serif;
    }

    /* 페이지 배경 크로스페이드 */
    .bgwrap{position:fixed;inset:0;z-index:-1;}
    .bgwrap .bg{position:absolute;inset:0;background-size:cover;background-position:center;
      opacity:0;transition:opacity 1.2s ease;filter:brightness(.9) contrast(1.03) saturate(1.02);}
    .bgwrap .bg.show{opacity:.9}

    header{position:sticky;top:0;padding:18px 16px 10px;
      background:rgba(15,15,16,.7);backdrop-filter:blur(8px);
      border-bottom:1px solid #26282c;z-index:10}
    header h1{margin:0;font-size:20px}

    .album{display:grid;gap:16px;padding:16px}
    .card{border-radius:16px;overflow:hidden;box-shadow:0 6px 18px rgba(0,0,0,.3)}

    .cardBox{
      position:relative;width:100%;aspect-ratio:9/16;
      background-image:var(--bgimg);
      background-size:cover;background-position:center;
      filter:brightness(.95) saturate(1.02);
    }
    .photoWrap{
      position:absolute;left:50%;top:50%;
      width:min(80%,420px);
      transform:translate(-50%,-50%) rotate(var(--rot));
    }
    .photoWrap img{
      width:100%;height:auto;display:block;border-radius:12px;
      box-shadow:0 10px 26px rgba(0,0,0,.35);
    }
    .photoWrap .frame{
      position:absolute;inset:-6px;border:2px solid rgba(255,255,255,.85);
      border-radius:16px;pointer-events:none;
    }

    /* 전체화면 뷰어 */
    .viewer{position:fixed;inset:0;background:rgba(8,8,10,.96);
      display:none;align-items:center;justify-content:center;z-index:50}
    .viewer.open{display:flex}
    .viewer__imgwrap{position:relative;width:100vw;height:100vh;overflow:hidden;touch-action:none}
    .viewer__img{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
      max-width:100vw;max-height:100vh;object-fit:contain;transition:transform .25s ease}
    .viewer__top{position:absolute;left:0;right:0;top:0;padding:10px 12px;
      display:flex;align-items:center;justify-content:space-between;
      background:linear-gradient(180deg,rgba(0,0,0,.45),transparent)}
    .chip{border:1px solid #26282c;background:rgba(32,33,36,.7);color:#e9ecef;
      padding:8px 11px;border-radius:999px;font-size:12.5px}
    .index{margin-left:auto}
    .navZone{position:absolute;top:0;bottom:0;width:32%;}
    .navPrev{left:0}.navNext{right:0}
    .swiping .viewer__img{transition:none}
    body.lock{overflow:hidden;touch-action:none}
  </style>
</head>
<body>
  <div class="bgwrap">
    <div class="bg" id="bg1"></div>
    <div class="bg" id="bg2"></div>
  </div>

  <header>
    <h1>느좋 송우성T 화보집</h1>
  </header>

  <main class="album" id="album"></main>

  <section class="viewer" id="viewer">
    <div class="viewer__imgwrap" id="imgWrap">
      <img id="big" class="viewer__img" alt="큰 이미지">
      <div class="viewer__top">
        <button class="chip" id="closeBtn">닫기</button>
        <span class="chip index" id="counter">1 / 8</span>
      </div>
      <div class="navZone navPrev" id="zonePrev"></div>
      <div class="navZone navNext" id="zoneNext"></div>
    </div>
  </section>

  <script>
    /* 사진/배경 1~8 준비 */
    const images=[...Array(8)].map((_,i)=>({src:`${String(i+1).padStart(2,'0')}.jpg`}));
    const backgrounds=[...Array(8)].map((_,i)=>`bg${i+1}.jpg`);

    /* 배경 크로스페이드 */
    const bg1=document.getElementById('bg1'), bg2=document.getElementById('bg2');
    let bgIndex=0,bgShowing=0;
    const applyBg=()=>{
      const next=backgrounds[bgIndex%backgrounds.length];
      if(bgShowing===0){bg2.style.backgroundImage=`url(${next})`;bg2.classList.add('show');bg1.classList.remove('show');bgShowing=1;}
      else{bg1.style.backgroundImage=`url(${next})`;bg1.classList.add('show');bg2.classList.remove('show');bgShowing=0;}
      bgIndex++;
    };
    bg1.style.backgroundImage=`url(${backgrounds[0]})`;bg1.classList.add('show');
    setInterval(()=>applyBg(),10000);

    /* 카드 생성: 기울기 번갈아 */
    const album=document.getElementById('album');
    album.innerHTML=images.map((it,idx)=>{
      const rot=(idx%2===0?'-':'')+(17+Math.random()*10).toFixed(1)+'deg';
      const bgurl=backgrounds[idx%backgrounds.length];
      return `
        <article class="card" data-idx="${idx}">
          <div class="cardBox" style="--bgimg:url('${bgurl}')">
            <div class="photoWrap" style="--rot:${rot}">
              <img src="${it.src}" alt="photo${idx+1}">
              <span class="frame"></span>
            </div>
          </div>
        </article>`;
    }).join('');

    /* 전체화면 뷰어 */
    const viewer=document.getElementById('viewer'),big=document.getElementById('big'),
          counter=document.getElementById('counter'),closeBtn=document.getElementById('closeBtn'),
          zonePrev=document.getElementById('zonePrev'),zoneNext=document.getElementById('zoneNext'),
          imgWrap=document.getElementById('imgWrap');
    let current=0,isOpen=false,scale=1;
    const openViewer=i=>{current=i;update();viewer.classList.add('open');document.body.classList.add('lock');isOpen=true;};
    const closeViewer=()=>{viewer.classList.remove('open');document.body.classList.remove('lock');isOpen=false;scale=1;applyScale();};
    const update=()=>{big.src=images[current].src;counter.textContent=`${current+1}/8`;};
    const go=d=>{current=(current+d+8)%8;scale=1;applyScale();update();};
    const applyScale=()=>{big.style.transform=`translate(-50%,-50%) scale(${scale})`;};

    album.addEventListener('click',e=>{
      const c=e.target.closest('.card');if(!c)return;
      openViewer(+c.dataset.idx);
    });
    closeBtn.onclick=closeViewer;
    zonePrev.onclick=()=>go(-1);
    zoneNext.onclick=()=>go(1);

    /* 스와이프 */
    let startX=0,lastX=0,swiping=false;
    imgWrap.addEventListener('touchstart',e=>{
      if(e.touches.length>1)return;
      startX=lastX=e.touches[0].clientX;swiping=true;viewer.classList.add('swiping');
    },{passive:true});
    imgWrap.addEventListener('touchmove',e=>{
      if(!swiping)return;
      const x=e.touches[0].clientX,dx=x-startX;lastX=x;
      big.style.transform=`translate(calc(-50% + ${dx}px), -50%) scale(${scale})`;
    },{passive:true});
    imgWrap.addEventListener('touchend',()=>{
      if(!swiping)return;
      const dx=lastX-startX;viewer.classList.remove('swiping');swiping=false;
      big.style.transform=`translate(-50%,-50%) scale(${scale})`;
      if(Math.abs(dx)>60)go(dx<0?1:-1);
    });
