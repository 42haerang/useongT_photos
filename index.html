<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>느좋 송우성T 화보집</title>

  <!-- 소셜 미리보기(원하는 이미지 경로로 변경) -->
  <meta property="og:title" content="느좋 송우성T 화보집">
  <meta property="og:description" content="한 장씩 넘겨보는 감성 화보 앨범">
  <meta property="og:image" content="cover_og.jpg">
  <meta property="og:type" content="website">

  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{
      height:100%;
      background:#0f0f10;color:#e9ecef;
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Arial,sans-serif;
      overflow:hidden;
    }

    /* 페이지 배경 크로스페이드 */
    .bgwrap{position:fixed;inset:0;z-index:-1;}
    .bgwrap .bg{
      position:absolute;inset:0;background-size:cover;background-position:center;
      opacity:0;transition:opacity 1.2s ease;filter:brightness(.9) contrast(1.03) saturate(1.02);
    }
    .bgwrap .bg.show{opacity:.9}

    header{
      position:fixed;top:0;left:0;right:0;padding:14px 16px;
      background:rgba(15,15,16,.6);backdrop-filter:blur(8px);
      border-bottom:1px solid #26282c;z-index:10;display:flex;align-items:center;gap:8px
    }
    header h1{font-size:18px;font-weight:600}
    .chip{margin-left:auto;border:1px solid #26282c;background:rgba(32,33,36,.7);color:#e9ecef;
      padding:7px 10px;border-radius:999px;font-size:12.5px}

    /* 가로 슬라이더 */
    .stage{position:relative;width:100vw;height:100vh;overflow:hidden}
    .slides{
      display:flex;width:100%;height:100%;
      transition:transform .6s ease;
      touch-action:pan-y; /* 세로 스크롤 제스처 무시(가로 스와이프 안정화) */
    }
    .slide{
      min-width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column;
      padding-top:60px; /* 헤더 공간 */
    }

    /* 표지 */
    .cover h2{font-size:32px;letter-spacing:1px}
    .cover p{margin-top:10px;color:#c9c9c9}

    /* 사진 프레임 */
    .photo{
      max-width:92vw;max-height:78vh;position:relative;transform:translateZ(0);
      border-radius:16px;overflow:hidden;box-shadow:0 10px 26px rgba(0,0,0,.35);
    }
    .photo img{
      display:block;width:100%;height:100%;object-fit:contain;background:#0b0b0c;
      user-select:none;-webkit-user-drag:none;
    }
    .frame{position:absolute;inset:-6px;border:2px solid rgba(255,255,255,.85);border-radius:16px;pointer-events:none}

    /* 드래그 중 스냅 끄기 */
    .grabbing .slides{transition:none}
  </style>
</head>
<body>
  <!-- 배경 -->
  <div class="bgwrap">
    <div class="bg" id="bg1"></div>
    <div class="bg" id="bg2"></div>
  </div>

  <header>
    <h1>느좋 송우성T 화보집</h1>
    <span class="chip" id="counter">1 / 1</span>
  </header>

  <main class="stage">
    <section class="slides" id="slides">
      <!-- JS에서 표지 + 사진 슬라이드 생성 -->
    </section>
  </main>

  <script>
    /* ===== 설정 ===== */

    // 사진 목록 (size는 개별 확대계수, 1 기준 / 0.7~1.0 추천)
    const images = [
      {src:'01.jpg', size:0.90},
      {src:'02.jpg', size:0.92},
      {src:'03.jpg', size:0.85},
      {src:'04.jpg', size:0.88},
      {src:'05.jpg', size:0.90},
      {src:'06.jpg', size:0.87},
      {src:'07.jpg', size:0.90},
      {src:'08.jpg', size:0.95}
    ];

    // 배경 이미지 (표지 포함 개수에 맞춰 순환)
    const backgrounds = ['bg1.jpg','bg2.jpg','bg3.jpg','bg4.jpg','bg5.jpg','bg6.jpg','bg7.jpg','bg8.jpg'];

    // 표지 텍스트
    const cover = {
      title: '느좋 송우성T 화보집',
      desc: '한 장씩 넘겨보는 슬라이드북'
    };

    /* ===== DOM ===== */
    const slidesEl = document.getElementById('slides');
    const counterEl = document.getElementById('counter');
    const bg1 = document.getElementById('bg1');
    const bg2 = document.getElementById('bg2');

    /* ===== 슬라이드 구성: 표지 + 사진들 ===== */
    const createCoverSlide = () => `
      <article class="slide cover" data-type="cover">
        <h2>${cover.title}</h2>
        <p>${cover.desc}</p>
      </article>
    `;

    const createPhotoSlide = (it, idx) => `
      <article class="slide" data-type="photo" data-idx="${idx}">
        <div class="photo" style="width:min(calc(${it.size}*86vw), 980px);">
          <img src="${it.src}" alt="photo${idx+1}">
          <span class="frame"></span>
        </div>
      </article>
    `;

    slidesEl.innerHTML = [
      createCoverSlide(),
      ...images.map((it, i) => createPhotoSlide(it, i))
    ].join('');

    const total = images.length + 1; // 표지 포함
    let index = 0; // 0 = 표지
    counterEl.textContent = `${index+1} / ${total}`;

    /* ===== 배경 크로스페이드 (현재 슬라이드에 맞춰) ===== */
    let bgShowing = 0;

    function setBgFor(index){
      const pick = backgrounds[index % backgrounds.length];
      if(bgShowing === 0){
        bg2.style.backgroundImage = `url(${pick})`;
        bg2.classList.add('show'); bg1.classList.remove('show'); bgShowing = 1;
      } else {
        bg1.style.backgroundImage = `url(${pick})`;
        bg1.classList.add('show'); bg2.classList.remove('show'); bgShowing = 0;
      }
    }

    // 초기 배경
    bg1.style.backgroundImage = `url(${backgrounds[0]})`;
    bg1.classList.add('show');

    function snap(){
      slidesEl.style.transform = `translateX(-${index * 100}vw)`;
      counterEl.textContent = `${index+1} / ${total}`;
      setBgFor(index);
    }

    /* ===== 스와이프 / 드래그 ===== */
    let startX = 0, curX = 0, dragging = false, moved = false;

    const onStart = (x) => {
      dragging = true; moved = false;
      startX = curX = x;
      document.body.classList.add('grabbing');
    };
    const onMove = (x) => {
      if(!dragging) return;
      const dx = x - startX;
      if(Math.abs(dx) > 3) moved = true;
      // 현재 위치 + 드래그 변위 반영
      slidesEl.style.transform = `translateX(calc(-${index*100}vw + ${dx}px))`;
    };
    const onEnd = () => {
      if(!dragging) return;
      const dx = curX - startX;
      dragging = false;
      document.body.classList.remove('grabbing');

      const threshold = Math.min(80, window.innerWidth * 0.18); // 화면 폭의 18% 또는 80px
      if(dx < -threshold && index < total-1) index++;
      else if(dx > threshold && index > 0) index--;
      snap();
    };

    // 터치
    slidesEl.addEventListener('touchstart', e => onStart(e.touches[0].clientX), {passive:true});
    slidesEl.addEventListener('touchmove',  e => { curX = e.touches[0].clientX; onMove(curX); }, {passive:true});
    slidesEl.addEventListener('touchend',   onEnd);

    // 마우스
    slidesEl.addEventListener('mousedown', e => onStart(e.clientX));
    window.addEventListener('mousemove',   e => { if(dragging){ curX = e.clientX; onMove(curX); } });
    window.addEventListener('mouseup',     onEnd);

    // 키보드(←/→)
    window.addEventListener('keydown', e=>{
      if(e.key === 'ArrowRight' && index < total-1){ index++; snap(); }
      if(e.key === 'ArrowLeft'  && index > 0){ index--; snap(); }
    });

    // 초기 스냅
    snap();

    /* ===== 성능: 이미지 프리로드(가벼운 선행 로딩) ===== */
    [...images.slice(0,3)].forEach(it=>{
      const i = new Image(); i.src = it.src;
    });
  </script>
</body>
</html>
